<script>
import { mapState, mapActions } from "vuex";
import UserListItem from '@/components/UserListItem.vue'

export default {
  name: "Users",
  components: { UserListItem },
  props: ['currentRoute'],
  data() {
    return {
      page: 1
    }
  },
  computed: {
    ...mapState(["users"]),
    totalPages() {
      const remain = this.users.length / 10
      return Math.ceil(remain)
    },
    currentUsers() {
      const to = (this.page * 10) + 1
      const from = (to - 10)
      return this.users.slice(from, to)
    },
    isDisabled() {
      if(this.page == this.totalPages) return true
      return false
    }
},
  methods: {
    ...mapActions(["fetchUsers"]),
    increase() {
      if(this.page == 8) return
      this.page = this.page + 1
    },
    decrease() {
      if(this.page == 1) return
      this.page = this.page - 1
    }
  },
  created() {
    this.fetchUsers();
  },
};
</script>


<template>
  <div class="main users">
    <div class="head">
      <h1>{{currentRoute}}</h1>
      <span class="buttons">
        <button class="btn dot">. . .</button>
        <button class="btn add">Ekle</button>
      </span>
    </div>

    <ul class="list-head">
      <li>Kullanıcı</li>
      <li>Tarih</li>
      <li>E-Posta</li>
      <li>Phone</li>
    </ul>

    <ul class="list-users">
      <UserListItem v-for='user in currentUsers' :user='user' :key="user.id" />
    </ul>

    <div class="pagination-handlers">
      <ul>
        <li style="margin-top: .2rem;" @click='decrease'>
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10.8407 20.154C11.661 20.154 12.4501 20.0485 13.2079 19.8376C13.9657 19.6266 14.6805 19.3259 15.3524 18.9352C16.0243 18.5446 16.6259 18.0798 17.1571 17.5407C17.6884 17.0016 18.1532 16.3962 18.5516 15.7243C18.9501 15.0524 19.2509 14.3415 19.454 13.5915C19.6571 12.8415 19.7665 12.0485 19.7821 11.2126C19.7821 10.3923 19.6766 9.60321 19.4657 8.8454C19.2548 8.08759 18.954 7.37274 18.5634 6.70087C18.1727 6.02899 17.7079 5.42743 17.1688 4.89618C16.6298 4.36493 16.0243 3.90008 15.3524 3.50165C14.6805 3.10321 13.9696 2.80243 13.2196 2.5993C12.4696 2.39618 11.6766 2.2868 10.8407 2.27118C10.0204 2.27118 9.23132 2.37665 8.47351 2.58758C7.7157 2.79852 7.00086 3.0993 6.32898 3.48993C5.65711 3.88055 5.05554 4.3454 4.52429 4.88446C3.99304 5.42352 3.5282 6.02899 3.12976 6.70087C2.73132 7.37274 2.43054 8.08368 2.22742 8.83368C2.02429 9.58368 1.91492 10.3766 1.89929 11.2126C1.89929 12.0329 2.00476 12.822 2.2157 13.5798C2.42664 14.3376 2.72742 15.0485 3.11804 15.7126C3.50867 16.3766 3.97742 16.9821 4.52429 17.529C5.07117 18.0759 5.67273 18.5407 6.32898 18.9235C6.98523 19.3063 7.69617 19.6071 8.46179 19.8259C9.22742 20.0446 10.0204 20.154 10.8407 20.154ZM10.8407 21.654C9.87976 21.654 8.95789 21.529 8.07507 21.279C7.19226 21.029 6.36023 20.6774 5.57898 20.2243C4.79773 19.7712 4.0946 19.2282 3.4696 18.5954C2.8446 17.9626 2.29773 17.2556 1.82898 16.4743C1.36023 15.6931 1.00867 14.8649 0.774293 13.9899C0.539918 13.1149 0.414918 12.1891 0.399293 11.2126C0.399293 10.2516 0.524293 9.32977 0.774293 8.44696C1.02429 7.56415 1.37586 6.73211 1.82898 5.95086C2.28211 5.16962 2.82507 4.46649 3.45789 3.84149C4.0907 3.21649 4.79773 2.66962 5.57898 2.20087C6.36023 1.73212 7.18836 1.38055 8.06336 1.14618C8.93836 0.911803 9.86414 0.786803 10.8407 0.771178C11.8016 0.771178 12.7235 0.896178 13.6063 1.14618C14.4891 1.39618 15.3212 1.74774 16.1024 2.20087C16.8837 2.65399 17.5868 3.19696 18.2118 3.82977C18.8368 4.46259 19.3837 5.16962 19.8524 5.95087C20.3212 6.73212 20.6727 7.56024 20.9071 8.43524C21.1415 9.31024 21.2665 10.236 21.2821 11.2126C21.2821 12.1735 21.1571 13.0954 20.9071 13.9782C20.6571 14.861 20.3055 15.6931 19.8524 16.4743C19.3993 17.2556 18.8563 17.9587 18.2235 18.5837C17.5907 19.2087 16.8837 19.7556 16.1024 20.2243C15.3212 20.6931 14.493 21.0446 13.618 21.279C12.743 21.5134 11.8173 21.6384 10.8407 21.654ZM11.8719 5.75165L12.9266 6.80633L8.5907 11.154L12.9266 15.5016L11.8719 16.5563L6.46961 11.154L11.8719 5.75165Z" fill="#BDC1CA"/>
          </svg>
        </li>
        <li>
          <span>{{page}}</span>
        </li>
        <li>of</li>
        <li>
          <span>{{totalPages}}</span>
        </li>
        <li style="margin-top: .2rem;" @click='increase'>
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11.1129 2.27118C10.2926 2.27118 9.50354 2.37665 8.74573 2.58759C7.98792 2.79852 7.27307 3.0993 6.6012 3.48993C5.92932 3.88055 5.32776 4.3454 4.79651 4.88446C4.26526 5.42352 3.80042 6.02899 3.40198 6.70087C3.00354 7.37274 2.70276 8.08368 2.49963 8.83368C2.29651 9.58368 2.18713 10.3766 2.17151 11.2126C2.17151 12.0329 2.27698 12.822 2.48792 13.5798C2.69885 14.3376 2.99963 15.0524 3.39026 15.7243C3.78088 16.3962 4.24573 16.9977 4.78479 17.529C5.32385 18.0602 5.92932 18.5251 6.6012 18.9235C7.27307 19.322 7.98401 19.6227 8.73401 19.8259C9.48401 20.029 10.277 20.1384 11.1129 20.154C11.9332 20.154 12.7223 20.0485 13.4801 19.8376C14.2379 19.6266 14.9528 19.3259 15.6246 18.9352C16.2965 18.5446 16.8981 18.0798 17.4293 17.5407C17.9606 17.0016 18.4254 16.3962 18.8239 15.7243C19.2223 15.0524 19.5231 14.3415 19.7262 13.5915C19.9293 12.8415 20.0387 12.0485 20.0543 11.2126C20.0543 10.3923 19.9489 9.60321 19.7379 8.8454C19.527 8.08759 19.2262 7.37665 18.8356 6.71259C18.4449 6.04852 17.9762 5.44305 17.4293 4.89618C16.8824 4.3493 16.2809 3.88446 15.6246 3.50165C14.9684 3.11884 14.2574 2.81805 13.4918 2.5993C12.7262 2.38055 11.9332 2.27118 11.1129 2.27118ZM11.1129 0.771179C12.0739 0.771179 12.9957 0.896179 13.8785 1.14618C14.7614 1.39618 15.5934 1.74774 16.3746 2.20087C17.1559 2.65399 17.859 3.19696 18.484 3.82977C19.109 4.46259 19.6559 5.16962 20.1246 5.95087C20.5934 6.73212 20.9449 7.56024 21.1793 8.43524C21.4137 9.31024 21.5387 10.236 21.5543 11.2126C21.5543 12.1735 21.4293 13.0954 21.1793 13.9782C20.9293 14.861 20.5778 15.6931 20.1246 16.4743C19.6715 17.2556 19.1285 17.9587 18.4957 18.5837C17.8629 19.2087 17.1559 19.7556 16.3746 20.2243C15.5934 20.6931 14.7653 21.0446 13.8903 21.279C13.0153 21.5134 12.0895 21.6384 11.1129 21.654C10.152 21.654 9.2301 21.529 8.34729 21.279C7.46448 21.029 6.63245 20.6774 5.8512 20.2243C5.06995 19.7712 4.36682 19.2282 3.74182 18.5954C3.11682 17.9626 2.56995 17.2556 2.1012 16.4743C1.63245 15.6931 1.28088 14.8649 1.04651 13.9899C0.812134 13.1149 0.687134 12.1891 0.671509 11.2126C0.671509 10.2516 0.796509 9.32977 1.04651 8.44696C1.29651 7.56415 1.64807 6.73212 2.1012 5.95087C2.55432 5.16962 3.09729 4.46649 3.7301 3.84149C4.36292 3.21649 5.06995 2.66962 5.8512 2.20087C6.63245 1.73212 7.46057 1.38055 8.33557 1.14618C9.21057 0.911804 10.1364 0.786804 11.1129 0.771179ZM10.0817 16.6735L9.02698 15.6188L13.3629 11.2712L9.02698 6.92352L10.0817 5.86884L15.484 11.2712L10.0817 16.6735Z" fill="#BDC1CA"/>
          </svg>
        </li>
      </ul>
    </div>

  </div>
</template>

<style>
</style>